{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block content %}
  <article class="w-full ">
    <!-- Hero Section -->
     <h1>{{ page.get_context }}</h1>
    <section class="section is-secondary pt-5 relative min-h-[700px] flex items-center overflow-hidden">
      {% if page.office_image %}
        {% image page.office_image original as bg_image %}
        <div class="absolute inset-0 z-0">
          <img src="{{ bg_image.url }}" alt="{{ page.hero_title }}" class="w-full h-full object-cover top-0 left-0">
          <div class="absolute inset-0 bg-black/30"></div>
        </div>
      {% endif %}
      <div class="container mx-auto px-4 lg:px-8 max-w-7xl relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-1 gap-8 lg:gap-12 items-center">
          <div class="space-y-6">
            <h1 class="heading_h3  leading-tight mb-6 text-white drop-shadow-md gs-reveal">
              {{ page.hero_title|default:"Карьера" }}
            </h1>
            <div class="heading_h2 text-white  mb-8 max-w-prose leading-relaxed text-white/90 gs-reveal">
              {{ page.hero_description|richtext }}
            </div>
            <a href="{{ page.hero_about_link|default:'/about/' }}" style=" color:white;    box-shadow: 0 0 0 2px white inset;" class="inline-block button is-secondary w-button px-6 py-3 rounded-lg shadow-lg hover:bg-red-50 hover:shadow-xl transition-all duration-300 gs-reveal">
              {{ page.hero_about_link_text|default:"Подробнее" }}
            </a>
          </div>
          
          </div>
        </div>
      </div>
    </section>

    <!-- What We Do Section (Наши ценности) -->
    <section class="section is-secondary">
      <div class="container mx-auto px-4 lg:px-8 max-w-7xl">
        <div class="w-layout-grid grid_2-col tablet-1-col gap-xxlarge">
          <div class="image-ratio_auto">
            {% if page.office_image %}
              {% image page.office_image fill-400x300 class="image_cover" alt=page.values_title %}
            {% endif %}
          </div>
          <div class="header max-width_large space-y-6">
            <h2 class="heading_h2 gs-reveal">{{ page.values_title|default:"Наши ценности" }}</h2>
            <div class="heading_h5 rich-text w-richtext">
              {% for item in values_items %}
                <div class="mb-6 p-4 border-l-4 border-red-500 bg-gray-50 rounded-r gs-reveal">
                  <h3 class="text-lg text-gray-900 font-semibold mb-2">{{ item.title }}</h3>
                  <p class="text-gray-700">{{ item.description|default:"" }}</p>
                </div>
             
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Expertise Grid (Направления) -->
    <section class="section">
      <div class="container mx-auto px-4 lg:px-8 max-w-7xl">
        <div class="header is-align-center">
          <h2 class="heading_h2 gs-reveal">{{ page.directions_title|default:"Направления" }}</h2>
        </div>
        <div class="w-layout-grid grid_3-col gap-2 lg:gap-3 mt-12">
          {% for item in directions_items %}
            <div class="items-center ">
              <h3 class="heading_h4 mb-2">{{ item.title }}</h3>
              <p class="text-sm text-gray-600">{{ item.description|default:"" }}</p>
            </div>
          
          {% endfor %}
        </div>
      </div>
    </section>

  <section class="section is-secondary">
  <div class="container mx-auto px-4 lg:px-8 max-w-7xl">
    <div class="header is-align-center">
      <h2 class="heading_h2 gs-reveal">{{ page.career_title }}</h2>
    </div>
    <div class="w-layout-grid grid_3-col gap-xsmall mt-12">
      {% for item in advantages_items %}
        <div class="card on-secondary">
          <div class="card_body">
            <div class="icon margin-bottom_xsmall">
              <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
                <path d="M9.24998 18.7103C6.60958 17.6271 4.75 15.0307 4.75 12C4.75 8.96938 6.60958 6.37304 9.24997 5.28979" stroke-width="1.5" stroke-linejoin="round" stroke="currentColor"></path>
                <path d="M14.75 5.28979C17.3904 6.37303 19.25 8.96938 19.25 12.0001C19.25 15.0307 17.3904 17.6271 14.75 18.7103" stroke-width="1.5" stroke-linejoin="round" stroke="currentColor"></path>
                <path d="M4 19.2501L8.99998 19.2501C9.13805 19.2501 9.24998 19.1381 9.24998 19.0001L9.24997 14" stroke-width="1.5" stroke-linejoin="round" stroke="currentColor"></path>
                <path d="M20 4.75L15 4.75003C14.8619 4.75003 14.75 4.86196 14.75 5.00003L14.75 10.0001" stroke-width="1.5" stroke-linejoin="round" stroke="currentColor"></path>
              </svg>
            </div>
            <h3 class="heading_h4">{{ item|title }}</h3>
          </div>
        </div>
      
      {% endfor %}
    </div>
  </div>
</section>


    <!-- Career Section (Форма) -->
    <section class="section">
      <div class="container mx-auto px-4 lg:px-8 max-w-7xl">
        <div class="w-layout-grid grid_2-col tablet-1-col gap-xxlarge">
          <div class="header max-width_large space-y-6">
            <h2 class="heading_h2 gs-reveal">{{ page.form_title|default:"Хотите в команду?" }}</h2>
            <div class="rich-text w-richtext gs-reveal">
              {{ page.form_description|richtext }}
            </div>
             {% include "vacancy/includes/vacancy_form.html" %}
          </div>
          <div class="image-ratio_auto">
            {% if page.office_image %}
              {% image page.office_image fill-400x300 class="image_cover" alt=page.form_title %}
            {% endif %}
          </div>
        </div>
      </div>
    </section>

    <!-- Office Section -->
    <section class="section is-secondary">
      <div class="container mx-auto px-4 lg:px-8 max-w-7xl">
        <div class="header is-align-center mb-12">
          <h2 class="heading_h2 gs-reveal">{{ page.office_title|default:"Наш офис" }}</h2>
        </div>
        <div class="grid  gap-8">
          
          <div class="space-y-4 gs-reveal">
            <div class="w-full h-100 rounded-lg overflow-hidden">
                           <div style="position:relative;overflow:hidden; ">
                            <a href="https://yandex.ru/maps/org/dio_konsalt/41393573854/?utm_medium=mapframe&utm_source=maps" style="color:#eee;font-size:12px;position:absolute;top:0px;">ДИО-Консалт</a>
                            <a href="https://yandex.ru/maps/55/tyumen/category/document_management_automation/184105420/?utm_medium=mapframe&utm_source=maps" style="color:#eee;font-size:12px;position:absolute;top:14px;">Автоматизация документооборота в Тюмени</a>
                            <a href="https://yandex.ru/maps/55/tyumen/category/production_automation/184107028/?utm_medium=mapframe&utm_source=maps" style="color:#eee;font-size:12px;position:absolute;top:28px;">Автоматизация производств в Тюмени</a>
                            <iframe src="https://yandex.ru/map-widget/v1/org/dio_konsalt/41393573854/?from=mapframe&ll=65.548711%2C57.139781&z=13" width="100%" height="500" frameborder="1" allowfullscreen="true" style="position:relative;"></iframe>
                          </div>
                        </div>
          </div>
        </div>
      </div>
    </section>


  </article>

  <style>

.image-ratio_1x1 { aspect-ratio: 1 / 1; position: relative; overflow: hidden; border-radius: var(--card-radius, 0.375rem); }
.image-ratio_auto { aspect-ratio: auto; position: relative; overflow: hidden; border-radius: var(--card-radius, 0.375rem); }
.w-layout-grid.grid_3-col { grid-template-columns: repeat(3, 1fr); gap: var(--gap-xs, 0.5rem); }
@media (min-width: 1024px) { .w-layout-grid.grid_3-col { gap: var(--gap-sm, 0.75rem); } }
.mt-12 { margin-top: var(--spacing-3x, 3rem); }
.padding-left_medium { padding-left: var(--spacing-3x, 1.5rem); }
.divider-vertical { border-left: 1px solid var(--border-secondary, #e5e7eb); padding-left: var(--spacing-1-25x, 0.625rem); }
.padding-top_xxsmall { padding-top: var(--spacing-xxsmall, 0.25rem); }
.animate-on-scroll { animation: countUp 1s ease-out forwards; }
@keyframes countUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.gs-reveal { opacity: 0; transform: translateY(20px); }
.prose { color: #4b5563; max-width: none; }
.prose h2 { color: #1e293b; font-weight: 700; font-size: 2rem; margin-top: 2rem; margin-bottom: 1rem; }
.prose h3 { color: #1e293b; font-weight: 600; font-size: 1.5rem; margin-top: 1.5rem; margin-bottom: 0.75rem; }
.prose p { color: #64748b; line-height: 1.75; margin-bottom: 1.25rem; }
.prose ul, .prose ol { color: #64748b; padding-left: 2rem; margin-bottom: 1.25rem; }
.prose ul li, .prose ol li { margin-bottom: 0.5rem; padding-left: 0.5rem; }
.prose blockquote { color: #475569; font-style: italic; border-left: 4px solid #3b82f6; padding-left: 1rem; margin: 1.5rem 0; }
.prose a { color: #3b82f6; text-decoration: underline; transition: color 0.3s; }
.prose a:hover { color: #2563eb; }

/* Мобильные стили */
@media only screen and (max-width: 768px) {
  .section.is-secondary .counter-element,
  .section.is-secondary .text-xs,
  .section.is-secondary .heading_h3 {
    color: #ffffff !important;
    background: rgba(0, 0, 0, 0.4);
    padding: 4px 8px;
    border-radius: 4px;
    position: relative;
    z-index: 10;
  }
}
  </style>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      gsap.registerPlugin(ScrollTrigger);
      gsap.utils.toArray('.gs-reveal').forEach(element => {
        gsap.fromTo(element, { opacity: 0, y: 20 }, {
          opacity: 1, y: 0, duration: 0.8, ease: "power2.out",
          scrollTrigger: { trigger: element, start: "top 95%", end: "bottom 20%", toggleActions: "play none none reverse" }
        });
      });

     
    });
  </script>

  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
  <script>
    function initMap() {
      const officeMap = new google.maps.Map(document.getElementById('office-map'), {
        zoom: 15, center: { lat: 55.7558, lng: 37.6176 }
      });
      new google.maps.Marker({ position: { lat: 55.7558, lng: 37.6176 }, map: officeMap, title: '{{ page.office_address }}' });
    }
  </script>
{% endblock %}