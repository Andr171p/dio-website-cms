<!-- Улучшенный чат-бот с модальным окном -->
<div>
  <!-- Кнопка чата -->
  <button id="chat-toggle" class="fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full flex items-center justify-center hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 animate-pulse z-50">
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
    </svg>
  </button>

  <!-- Модальное окно чата -->
  <div id="chat-modal" class="fixed bottom-24 right-6 w-96 bg-white rounded-2xl shadow-2xl p-4 hidden z-50 transform translate-y-10 opacity-0 transition-all duration-300 ease-out">
    <div class="flex justify-between items-center border-b border-gray-200 pb-3 mb-3">
      <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
        <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        AI агент
      </h3>
      <button id="chat-close" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
    </div>
    <div id="chat-messages" class="h-64 overflow-y-auto mb-3 space-y-2 pr-1">
      <!-- Сообщения будут добавляться динамически -->
      <div class="message ai-message p-3 bg-blue-50 rounded-lg rounded-tr-none">
        <p class="text-sm text-blue-800">Привет! Я AI агент. Как могу помочь?</p>
      </div>
    </div>
    <div class="flex gap-2">
      <input id="chat-input" type="text" placeholder="Напишите сообщение..." class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      <button id="chat-send" class="bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-300">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-2-9M5 19l-2-9 9 2m-6-4a2 2 0 00-2 2v4a2 2 0 002 2h4a2 2 0 002-2V9a2 2 0 00-2-2H9z"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<style>
  /* Анимация появления модального окна */
  #chat-modal.active {
    transform: translateY(0);
    opacity: 1;
  }

  /* Стили сообщений */
  .message {
    animation: slideInRight 0.3s ease-out;
  }

  .ai-message {
    background-color: #eff6ff;
    border-radius: 1rem 1rem 1rem 0;
    margin-left: 1rem;
  }

  .user-message {
    background-color: #f3f4f6;
    border-radius: 1rem 1rem 0 1rem;
    margin-right: 1rem;
  }

  @keyframes slideInRight {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* Пульсация кнопки */
  #chat-toggle {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const chatToggle = document.getElementById('chat-toggle');
  const chatModal = document.getElementById('chat-modal');
  const chatClose = document.getElementById('chat-close');
  const chatSend = document.getElementById('chat-send');
  const chatInput = document.getElementById('chat-input');
  const chatMessages = document.getElementById('chat-messages');

  // Открытие модального окна
  chatToggle.addEventListener('click', () => {
    chatModal.classList.remove('hidden');
    chatModal.classList.add('active');
    setTimeout(() => chatInput.focus(), 300);
  });

  // Закрытие модального окна
  chatClose.addEventListener('click', () => {
    chatModal.classList.remove('active');
    setTimeout(() => chatModal.classList.add('hidden'), 300);
  });

  // Закрытие при клике вне модального окна
  document.addEventListener('click', (event) => {
    if (!chatModal.contains(event.target) && !chatToggle.contains(event.target)) {
      chatModal.classList.remove('active');
      setTimeout(() => chatModal.classList.add('hidden'), 300);
    }
  });

  // Обработка отправки сообщения
  chatSend.addEventListener('click', () => {
    const message = chatInput.value.trim();
    if (message) {
      addMessage(message, 'user');
      chatInput.value = '';

      // Заглушка для AI-ответа (замените на реальный API)
      setTimeout(() => {
        const aiResponse = getAIResponse(message);
        addMessage(aiResponse, 'ai');
      }, 800);
    }
  });

  // Отправка по Enter
  chatInput.addEventListener('keypress', (event) => {
    if (event.key === 'Enter') {
      chatSend.click();
    }
  });

  function addMessage(text, type) {
    const messageElement = document.createElement('div');
    messageElement.classList.add('message', type === 'user' ? 'user-message' : 'ai-message', 'p-3', 'rounded-lg', 'max-w-xs');
    messageElement.textContent = text;
    chatMessages.appendChild(messageElement);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function getAIResponse(message) {
    // Простая заглушка — замените на реальный API (например, xAI)
    return 'Спасибо за вопрос! Это пример ответа от AI агента. Я могу помочь с информацией о проектах, услугах и т.д.';
  }
});
</script>