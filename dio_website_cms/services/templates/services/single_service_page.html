{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block content %}
    {% for block in page.content %}
        {% if block.block_type == 'hero' %}
            <!-- Hero Section -->
            <section class="section is-inverse">
                <div class="container">
                    <div class="w-layout-grid grid_2-col tablet-1-col gap-xxlarge">
                        <div class="header max-width_large">
                            <h1 class="heading_h1">{{ block.value.title }}</h1>
                            <p class="paragraph_xlarge text-color_secondary">{{ block.value.subtitle }}</p>
                        </div>
                        <div class="image-ratio_auto">
                            {% image block.value.image fill-800x600 class="image_cover" alt=block.value.title %}
                                
                        </div>
                    </div>
                </div>
            </section>
        {% elif block.block_type == 'what_we_do' %}
            <!-- Что мы делаем (SVG слева, текст справа) -->
            <section class="section">
                <div class="container">
                    <div class="w-layout-grid grid_2-col tablet-1-col gap-medium">
                        <div class="image-ratio_auto">
                            {% image block.value.svg_image fill-400x300 class="image_cover" alt=block.value.title %}
                        </div>
                        <div class="header max-width_large">
                            <h2 class="heading_h2">{{ block.value.title }}</h2>
                            <div class="rich-text w-richtext">
                                {{ block.value.description|richtext }}
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        {% elif block.block_type == 'square_image' %}
            <!-- Большой квадратный блок изображения -->
            <section class="section">
                <div class="container">
                    <div class="w-layout-grid grid_1-col gap-2 lg:gap-3 mt-12">
                        <div class="image-ratio_1x1">
                            {% image block.value.image fill-600x600 class="image_cover" alt=block.value.alt_text %}
                        </div>
                    </div>
                </div>
            </section>
        {% elif block.block_type == 'expertise_grid' %}
            <!-- Сетка отраслей/услуг -->
            <section class="section">
    <div class="container">
        <div class="header is-align-center">
            <h2 class="heading_h2">{{ block.value.title }}</h2>
        </div>
        <div class="w-layout-grid grid_3-col gap-4 lg:gap-6 py-10">
            {% for item in block.value.items %}
                <div class="grid-item padding-left_medium divider-vertical padding-top_xxsmall is-align-center">
                    <h3 class="py-4 heading_h4">{{ item.title }}</h3>
                    {% if item.description %}
                        <p class="margin-bottom_none">{{ item.description|striptags }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</section>
        {% elif block.block_type == 'cta' %}
            <!-- CTA -->
            <section class="section is-accent-primary">
                <div class="container">
                    <div class="header is-align-center">
                        <h2 class="heading_h2">{{ block.value.title }}</h2>
                        <p class="paragraph_large text-color_secondary">{{ block.value.description|richtext }}</p>
                    </div>
                    <div class="button-group is-align-center">
                        <a href="{{ block.value.link_page.url }}" class="button is-secondary w-button">
                            {{ block.value.link_text }}
                        </a>
                    </div>
                </div>
            </section>
        {% endif %}
    {% endfor %}

    <!-- Другие услуги -->
    {% if page.other_services %}
        <section class="section">
            <div class="container">
                <div class="header is-align-center">
                    <h2 class="heading_h2">Другие услуги</h2>
                </div>
                <div class="w-layout-grid grid_3-col gap-2 lg:gap-3 mt-12">
                    {% for service in other_services %}
                        <a href="{{ service.url }}" class="card relative overflow-hidden rounded-xl shadow-lg group" style="height: 300px;">
                            {% if service.image %}
                                {% image service.image fill-400x300 class="w-full h-full object-cover absolute top-0 left-0 z-0 transition-transform duration-1000 group-hover:scale-125" %}
                            {% endif %}
                            <div class="relative z-10 flex flex-col justify-between h-full p-6 bg-black/10 text-white">
                                <div class="flex items-center justify-between mb-4">
                                    <span class="px-2 py-1 rounded-full bg-blue-600/50 text-white text-xs font-medium">
                                        {{ service.get_category_display }}
                                    </span>
                                </div>
                                <div class="space-y-2 flex-grow">
                                    <h3 class="heading_h4 text-white">{{ service.headline }}</h3>
                                    <p class="subheading text-gray-200">
                                        {{ service.intro|striptags|truncatewords:10 }}
                                    </p>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}

<style>
    /* Адаптация под ваши переменные */
    .image-ratio_1x1 {
        aspect-ratio: 1 / 1;
        position: relative;
        overflow: hidden;
        border-radius: var(--ai-gen-82921b10-4b39-48f0-b346-808cf4903d29-1758515754692_sizes---card--card-radius);
    }

    .image-ratio_auto {
        aspect-ratio: auto;
        position: relative;
        overflow: hidden;
        border-radius: var(--ai-gen-82921b10-4b39-48f0-b346-808cf4903d29-1758515754692_sizes---card--card-radius);
    }

    .w-layout-grid.grid_3-col {
        grid-template-columns: repeat(3, 1fr);
        gap: var(--ai-gen-82921b10-4b39-48f0-b346-808cf4903d29-1758515754692_sizes---gap--xs-gap);
    }

    @media (min-width: 1024px) {
        .w-layout-grid.grid_3-col {
            gap: var(--ai-gen-82921b10-4b39-48f0-b346-808cf4903d29-1758515754692_sizes---gap--sm-gap);
        }
    }

    .w-layout-grid.grid_3-col {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}
.grid-item {
    padding: 1rem;
    margin: 0.5rem;
    background: var(--ai-gen-82921b10-4b39-48f0-b346-808cf4903d29-1758515754692---background-color--background-primary);
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
@media (min-width: 1024px) {
    .w-layout-grid.grid_3-col {
        gap: 1.5rem;
    }
}
@media (max-width: 767px) {
    .w-layout-grid.grid_3-col {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
}
</style>
{% endblock %}